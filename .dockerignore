FROM node:18-alpine
WORKDIR /app

COPY package*.json ./
RUN npm ci

COPY tsconfig.json ./
COPY src ./src

RUN npm run build

ENV NODE_ENV=production
# Railway จะกำหนด PORT ให้อัตโนมัติ โค้ดเราต้องอ่าน process.env.PORT
CMD ["node","dist/index.js"]
